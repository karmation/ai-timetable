<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Timetable Generator</title>
    <!-- Link to your CSS file -->
    <link rel="stylesheet" href="style.css">
    <!-- Link to Google Fonts and Font Awesome Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <div id="toast-container"></div>

    <!-- =============================================================== -->
    <!-- Sidebar Navigation -->
    <!-- =============================================================== -->
    <nav class="sidebar anim-sidebar">
        <div class="sidebar-header">AI Generator</div>
        <ul class="sidebar-links">
            <li><a href="#" class="sidebar-link active" data-page="dashboard"><i class="fa-solid fa-house"></i><span>Dashboard</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="my-schedule"><i class="fa-solid fa-calendar-week"></i><span>My Schedule</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="students"><i class="fa-solid fa-graduation-cap"></i><span>Student Records</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="courses"><i class="fa-solid fa-book"></i><span>Course Catalog</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="faculty"><i class="fa-solid fa-user-group"></i><span>Faculty Directory</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="rooms"><i class="fa-solid fa-person-shelter"></i><span>Room Directory</span></a></li>
            <li><a href="#" class="sidebar-link" data-page="upload"><i class="fa-solid fa-cloud-upload"></i><span>Upload & Analyze</span></a></li>
        </ul>
        <div class="sidebar-footer">
            <a href="#" class="btn-logout"><i class="fa-solid fa-right-from-bracket"></i><span>Logout</span></a>
        </div>
    </nav>

    <!-- =============================================================== -->
    <!-- Main Content Area -->
    <!-- =============================================================== -->
    <div class="main-content">
        <header class="anim-fade-in">
            <button class="mobile-nav-toggle"><i class="fa-solid fa-bars"></i></button>
            <h1 id="page-title">Dashboard</h1>
            <div class="header-right">
                <div id="welcome-message"></div>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox"><input type="checkbox" id="checkbox" /><div class="slider round"></div></label>
                </div>
            </div>
        </header>

        <!-- Page 1: Personalized Dashboard -->
        <main id="dashboard-page" class="page active anim-page-content">
            <div class="dashboard-grid">
                <section class="card dashboard-widget">
                    <h3>Your Schedule Today</h3>
                    <div id="teacher-schedule-widget" class="widget-content"><div class="placeholder-widget"><i class="fa-solid fa-spinner fa-spin"></i><p>Loading schedule...</p></div></div>
                </section>
                <section class="card dashboard-widget">
                    <h3>Your Assigned Courses</h3>
                    <div id="teacher-courses-widget" class="widget-content"><div class="placeholder-widget"><p>Loading courses...</p></div></div>
                </section>
            </div>
        </main>

        <!-- Page 2: My Schedule -->
        <main id="my-schedule-page" class="page anim-page-content">
            <section class="card">
                <h2>Your Weekly Schedule</h2>
                <p>Here is your personal timetable for the week.</p>
                <div class="timetable-controls"><button class="btn-export">Export as PDF</button></div>
                <div id="personal-timetable-grid"><div class="placeholder-widget"><i class="fa-solid fa-spinner fa-spin"></i><p>Loading timetable...</p></div></div>
            </section>
        </main>

        <!-- Page 3: Student Records -->
        <main id="students-page" class="page anim-page-content" data-collection="students">
            <div class="page-header admin-only">
                <button class="btn-show-form">+ Add New</button>
            </div>
            <div class="add-form-container admin-only">
                <section class="card">
                    <h2>Student Management</h2>
                    <p>Select an action to manage student details or enter marks.</p>
                    <div class="form-group">
                        <label for="student-action-selector">Select Action:</label>
                        <select id="student-action-selector">
                            <option value="add_student" selected>Add New Student to Roster</option>
                            <option value="enter_marks">Enter/Update Student Marks</option>
                        </select>
                    </div>
                </section>
                <div id="add-student-container" class="student-action-panel active">
                    <section class="card">
                        <h2>Add New Student</h2>
                        <form class="input-form">
                            <div class="form-group"><label for="student-name">Student Name</label><input type="text" id="student-name" name="name" required></div>
                            <div class="form-group"><label for="student-roll">Roll Number</label><input type="text" id="student-roll" name="rollNumber" required></div>
                            <div class="form-group"><label for="student-program">Program</label><input type="text" id="student-program" name="program" placeholder="e.g., FYUP B.Sc" required></div>
                            <button type="submit" class="btn-add">Add Student</button>
                        </form>
                    </section>
                </div>
                <div id="enter-marks-container" class="student-action-panel">
                     <section class="card">
                        <h2>Enter Student Marks</h2>
                        <p>Select a student and course to input their test scores.</p>
                        <form class="input-form">
                            <div class="form-group"><label for="marks-student-select">Select Student</label><select id="marks-student-select" name="student_roll" required></select></div>
                            <div class="form-group"><label for="marks-course-select">Select Course</label><select id="marks-course-select" name="course_code" required></select></div>
                            <div class="form-group"><label for="marks-test-select">Select Test</label><select id="marks-test-select" name="test_name" required><option value="midterm1">Midterm Exam 1</option><option value="final_project">Final Project</option><option value="end_sem_exam">End Semester Exam</option></select></div>
                            <div class="form-group"><label for="marks-input">Enter Marks</label><input type="number" id="marks-input" name="marks" min="0" max="100" required></div>
                            <button type="submit" class="btn-add">Submit Marks</button>
                        </form>
                    </section>
                </div>
            </div>
            <section class="card">
                <h2>Student Records</h2>
                <div class="filter-container">
                    <label for="test-selector">View Marks For:</label>
                    <select id="test-selector"><option value="overall">Overall Performance</option><option value="midterm1">Midterm Exam 1</option><option value="final_project">Final Project</option><option value="end_sem_exam">End Semester Exam</option></select>
                </div>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead><tr><th>Name</th><th>Roll Number</th><th>Program</th><th id="marks-column-header">Overall (%)</th><th>Actions</th></tr></thead>
                        <tbody><tr class="empty-row"><td colspan="5">No student records found.</td></tr></tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Page 4: Course Catalog -->
        <main id="courses-page" class="page anim-page-content" data-collection="courses">
            <div class="page-header admin-only">
                <button class="btn-show-form">+ Add New</button>
            </div>
            <div class="add-form-container admin-only">
                <section class="card">
                    <h2>Add New Course</h2>
                    <form class="input-form">
                        <div class="form-group"><label for="course-code">Course Code</label><input type="text" id="course-code" name="code" required></div>
                        <div class="form-group"><label for="course-name">Course Name</label><input type="text" id="course-name" name="name" required></div>
                        <div class="form-group"><label for="course-credits">Credits</label><input type="number" id="course-credits" name="credits" required></div>
                        <div class="form-group"><label for="course-type">Type</label><select id="course-type" name="type" required><option value="Theory">Theory</option><option value="Practical/Lab">Practical/Lab</option></select></div>
                        <button type="submit" class="btn-add">Add Course</button>
                    </form>
                </section>
            </div>
            <section class="card">
                <h2>Institution Course Catalog</h2>
                <p>Courses assigned to you are highlighted.</p>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead><tr><th>Assigned</th><th>Code</th><th>Name</th><th>Credits</th><th>Type</th><th>Actions</th></tr></thead>
                        <tbody><tr class="empty-row"><td colspan="6">No courses found.</td></tr></tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Page 5: Faculty Directory -->
        <main id="faculty-page" class="page anim-page-content" data-collection="faculty">
            <div class="page-header admin-only">
                <button class="btn-show-form">+ Add New</button>
            </div>
            <div class="add-form-container admin-only">
                <section class="card">
                    <h2>Add New Faculty</h2>
                    <form class="input-form">
                        <div class="form-group"><label for="faculty-name">Faculty Name</label><input type="text" id="faculty-name" name="name" required></div>
                        <div class="form-group"><label for="faculty-expertise">Expertise</label><input type="text" id="faculty-expertise" name="expertise" required></div>
                        <button type="submit" class="btn-add">Add Faculty</button>
                    </form>
                </section>
            </div>
            <section class="card">
                <h2>Faculty Directory</h2>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead><tr><th>Name</th><th>Expertise</th><th>Email</th><th>Actions</th></tr></thead>
                        <tbody><tr class="empty-row"><td colspan="4">No faculty found.</td></tr></tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Page 6: Room Directory -->
        <main id="rooms-page" class="page anim-page-content" data-collection="rooms">
            <div class="page-header admin-only">
                <button class="btn-show-form">+ Add New</button>
            </div>
            <div class="add-form-container admin-only">
                <section class="card">
                    <h2>Add New Room/Lab</h2>
                    <form class="input-form">
                        <div class="form-group"><label for="room-id">Room/Lab No.</label><input type="text" id="room-id" name="id" required></div>
                        <div class="form-group"><label for="room-capacity">Capacity</label><input type="number" id="room-capacity" name="capacity" required></div>
                        <div class="form-group"><label for="room-type">Type</label><select id="room-type" name="type" required><option value="Lecture Hall">Lecture Hall</option><option value="Computer Lab">Computer Lab</option></select></div>
                        <button type="submit" class="btn-add">Add Room</button>
                    </form>
                </section>
            </div>
            <section class="card">
                <h2>Available Rooms & Labs</h2>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead><tr><th>ID</th><th>Capacity</th><th>Type</th><th>Actions</th></tr></thead>
                        <tbody><tr class="empty-row"><td colspan="4">No rooms found.</td></tr></tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Page 7: Upload & Analyze -->
        <main id="upload-page" class="page anim-page-content">
            <section class="card">
                <h2>Upload & Analyze Documents</h2>
                <p>Upload a document for the AI to analyze and automatically populate data.</p>
                <div class="form-group">
                    <label for="analysis-type">Select Document Type:</label>
                    <select id="analysis-type" name="analysis_type"><option value="course_list">Course & Faculty List</option><option value="student_marks">Student Marks Sheet</option></select>
                </div>
                <div class="file-upload-container">
                    <input type="file" id="file-upload" class="file-input-hidden" accept=".pdf,.doc,.docx">
                    <label for="file-upload" class="file-upload-label"><i class="fa-solid fa-upload"></i><span>Choose a file...</span></label>
                </div>
                <div id="file-info" class="file-info-display" style="display: none;">
                    <span id="file-name-display"></span>
                    <button id="btn-analyze" class="btn-analyze" type="button">Analyze File</button>
                </div>
                <div id="analysis-results-card" class="card" style="display: none; margin-top: 20px;"></div>
            </section>
            <section class="card">
                <h2>Generate Master Timetable (Admin)</h2>
                <p>This tool uses all current data to generate a new master timetable.</p>
                <div class="text-center"><button id="generate-btn" class="btn-generate">✨ Generate Master Timetable</button></div>
            </section>
            <section id="timetable-output" class="card" style="display: none;"></section>
        </main>
        
        <!-- Modal for Displaying Detailed Marks -->
        <div id="marks-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <button class="modal-close-btn">&times;</button>
                <h3 id="modal-student-name"></h3>
                <div id="modal-marks-content"></div>
            </div>
        </div>
    </div>

    <!-- Anime.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Your App's Script (as a module) -->
    <script type="module" src="script.js"></script>
</body>
</html>

